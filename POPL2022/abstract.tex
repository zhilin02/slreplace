%!TEX root = main.tex

\begin{abstract}
%% some background on regular expressions
Regular expressions are a classical concept in formal language theory.
%, which are expressions built from characters by the operators of concatenation, union, and Kleene star.
%Real-world regular expressions (RWRE) 
%On the other hand, 
Regular expressions in programming languages ({\regexp}) such as JavaScript, feature non-standard semantics of operators 
(e.g. greedy/lazy Kleene star), as well as additional features such as capturing
groups and references.
%e.g. non-commutative union and
%% symbolic execution requires faithful encoding of regex semantics
%String constraint solvers are one of the cornerstones of the analysis and verification of string manipulating programs. Faithful encoding of the semantics of real-world regular expressions in string constraint solvers facilitates more precise program analysis and verification.
%% state of the art string constraint solvers
%The semantics of real-word regular expressions are tricky and vary in different programming languages. It is challenging for string constraint solvers to support real-world regular expressions.
%While REs are supported by state-of-the-art string constraint solvers,
%REs are thus far unsupported. 
%Recent work suggests that
%the mismatch between REs and RWREs
% %in string constraint
%%solvers and RWREs in programming languages
%%hinders the precision and efficiency
%makes it difficult for symbolic execution engines to handle RWREs, where approximation of RWREs is usually needed.
%
%For instance,
%%which are hitherto
%ad-hoc CEGAR-based approaches may have to be used which involves
%
%%, such as approximation by
%%
%some approximated by a CEGAR-based approach,\philipp{this should be rephrased, it sounds as if CEGAR is the standard approach to deal with RWREs. It is not, there is only one symex tool doing that.} which performs
%many satisfiability checks of string constraints with only REs.
%
%
%; hitherto,
%RWREs are either approximated away
%
%by resorting to approximate
%encoding of RWREs and counter-example guided abstraction refinements (CEGAR).
%
%The semantics of real-world regular expressions are better to be encoded as faithfully as possible. For instance, in dynamic symbolic execution of string manipulating programs, in order to generate the inputs for execution paths and improve coverage,  the semantics of real-world regular expressions are better to be encoded as faithfully as possible in string constraint solvers.
%% contribution
While symbolic execution of programs containing \regexps{} appeals to string solvers natively supporting important features of \regexp{}, such a string solver is hitherto missing.  
%
In this paper, we propose the first string theory and string solver that natively provides such support.
%of natively supporting these features of REs in string constraint solving. 
%Our approach relies on a string constraint language including \regexp{}-dependent string functions such as extract and replace(all). 
%
The key idea of our string solver is to introduce a new automata model, called \emph{prioritized streaming string transducers} (PSST), to formalize the semantics of \regexp{}-dependent string functions.
PSSTs combine \emph{priorities}, which have previously been introduced
in prioritized finite-state automata to capture greedy/lazy semantics,
with \emph{string variables} as in streaming string transducers to
model capturing groups. We validate the consistency of the formal semantics with the actual JavaScript
semantics by extensive experiments.
%
%non-standard semantics of regular expression operators can be modeled by priorities and new features of capturing groups and back references can be modeled by string variables.
%the non-standard semantics of regular expression operators can be modeled by priorities and new features of capturing groups and back references can be modeled by string variables.
%Based on PSSTs, we design a decision procedure for string constraints with
%RWREs and provide its implementation.
%% implementation and experiments
%We implement the decision procedure
%and do extensive experiments to evaluate its performance.
%
%We formulate a string constraint language including complex string functions such as extract and replace(all), and 
Furthermore, to solve the string constraints, we show that {\PSST}s enjoy nice closure and algorithmic properties, 
in particular, the regularity-preserving property (i.e., pre-images of regular constraints under {\PSST}s are regular), 
and introduce a sound sequent calculus that 
exploits these properties and 
performs  propagation of regular constraints by means of 
taking post-images or pre-images. %, as well as to measure the performance of our solver., 
%In particular, we show that {\PSST}s preserve regularity, i.e. pre-images of regular constraints under {\PSST}s are regular and can be effectively computed. 
Although the satisfiability of the string constraint language is generally 
undecidable, we show that our approach is complete for the so-called straight-line fragment.
%
We evaluate the performance of our string solver on over 195\,000 string constraints generated from an open-source {\regexp} library. The experimental results show the efficacy of our approach, drastically improving the existing methods (via symbolic execution) in  both precision and efficiency.
%Our approach dramatically improves the CEGAR-based approach for RWREs in both
%precision and efficiency.
%To the best of our knowledge, this work represents the first string constraint solver supporting RWREs.

%======================================
%Regular expressions (REs) %are a classical concept
%in formal language theory %, which are expressions
%are built up %from characters by the operators of
%by operators such as concatenation, union, and Kleene star. Real-world regular expressions (RWREs) in programming languages %differ from REs in the
%usually adopt non-standard semantics of these operators, e.g., non-commutative union and greedy/lazy Kleene star, and include additional features such as capturing groups and back references.
%%% symbolic execution requires faithful encoding of regex semantics
%%String constraint solvers are one of the cornerstones of the analysis and verification of string manipulating programs. Faithful encoding of the semantics of real-world regular expressions in string constraint solvers facilitates more precise program analysis and verification.
%%% state of the art string constraint solvers
%%The semantics of real-word regular expressions are tricky and vary in different programming languages. It is challenging for string constraint solvers to support real-world regular expressions.
%While REs are generally well supported by state-of-the-art string constraint solvers, %(e.g. CVC4 and Z3-str),
%RWREs have not been addressed sufficiently. %are not supported by them. The mismatch between REs in string constraint solvers and RWREs in programming languages
%As a result, symbolic execution engines have to resort to ad hoc approximation of RWREs and counter example guided
%abstraction refinements (CEGAR) to solve constraints with RWREs, which is limited in both precision and efficiency. %(CEGAR) to mitigate this issue.
%%This hinders the precision and efficiency of symbolic execution engines, which have to resort to approximate encoding of RWREs and counter example guided abstraction refinements (CEGAR) to mitigate this issue.
%%
%%The semantics of real-world regular expressions are better to be encoded as faithfully as possible. For instance, in dynamic symbolic execution of string manipulating programs, in order to generate the inputs for execution paths and improve coverage,  the semantics of real-world regular expressions are better to be encoded as faithfully as possible in string constraint solvers.
%%% contribution
%In this paper, we propose a new, direct %an
%approach %of natively supporting
%to supporting RWREs in string constraint solving. The key %of our approach
%is %to introduce
%a new automata model called prioritized streaming string transducers (PSSTs),
%which combines %priorities in
%prioritized finite automata and %string variables in
%streaming string transducers to model string functions involving RWREs.
%%non-standard semantics of regular expression operators can be modeled by priorities and new features of capturing groups and back references can be modeled by string variables.
%%the non-standard semantics of regular expression operators can be modeled by priorities and new features of capturing groups and back references can be modeled by string variables.
%Based on PSSTs, we develop decision procedures for string constraints with RWREs.
%%% implementation and experiments
%We implement the decision procedure and carry out extensive experiments %to evaluate its performance. The experimental results on
%on over 160,000 string constraints generated from RWREs in open-source programs. The results show that our approach drastically improves the CEGAR-based approach for RWREs in both precision and efficiency. To the best of our knowledge, this work represents the first string constraint solver supporting RWREs.

\end{abstract}
